# Run `travis lint` when changing this file to avoid breaking the build.
# Default JDK is really old: 1.8.0_31; Trusty's is less old: 1.8.0_51
# https://docs.travis-ci.com/user/ci-environment/#Virtualization-environments
sudo: false
dist: trusty

cache:
  directories:
  - $HOME/.m2

language: java

jdk:
  - oraclejdk8

addons:
  apt:
    packages:
      - oracle-java8-installer

before_install:
  # allocate commits to CI, not the owner of the deploy key
  - git config user.name "opentracingci"
  - git config user.email "opentracingci+opentracing@googlegroups.com"
  # setup https authentication credentials, used by ./mvnw release:prepare
  - git config credential.helper "store --file=.git/credentials"
  - echo "https://$GH_TOKEN:@github.com" > .git/credentials

install:
  # Override default travis to use the maven wrapper
  - ./mvnw install -DskipTests=true -Dmaven.javadoc.skip=true -B -V

script:
  - ./travis/publish.sh

# Don't build release tags. This avoids publish conflicts because the version commit exists both on master and the release tag.
# See https://github.com/travis-ci/travis-ci/issues/1532
branches:
  except:
    - /^[0-9]/

env:
  global:
  # Ex. travis encrypt -r opentracing-contrib/java-globaltracer BINTRAY_USER=your_github_account
  - secure: "zxxgdEqZA+A5tAeNWIkbCuL9fg31QSR/7k56CQ+xPVepGR62DpJQa05sZ+e+d3FppUPo25yIOfsYdaq0kb9mZj9tlyVU/nm7AroMs9MjAHiFZWGef3GaczzTEPgBcRsKRn1qZ3Gm5y1LSn6b4liEyxcHkVexIuWDKgFz1MCqzBDkJp+FBm4l3ZUGFoNdd514JhxOv4a6gjWgLwxavlyHyLLE6je2I1f/fpczvpRKMIUUMoYZqpm8NbPu/Q9rA1sRA25SoclaJQx/l1pzFIdo3DqPNw29BNCSOoBm9QkcBmKkpPkBZ7E1q9tF/fUEqiW3VSgTTJcK7FHU5242f+6D8lsyxeV/5INTdC1IHW0O19KlLOA5cAINezZpWC0ZFIBy0dy6GjR/DRAjWuS+XRitg7dUYdcAl1slHkQkfJj3iXYlKs5W1KXbaVtVGaUasmhrSOoSwgscDL5VYnas8Mh3FmJQn+sHvE9VJhD0aFWh38Tck1nlUYdSz8tOS1/i3+TvmNMhpNsHTesr1U4+rzJAi5QSFzkQcAmxDaVc8Nw2EibIoB+2lkpP/4KHMG4Hjl1OZ7qPJvVEN3/BZnAfNvFAJpDg4sYKHk+eGjkDRItWlNOUEy1+eFaB2s7Sm8sdi10rj9TSCqcTFZui6+klmyfGmEjvclnUgp6jd5a2AqKJXK4="
  # Ex. travis encrypt BINTRAY_KEY=xxx-https://bintray.com/profile/edit-xxx --add
  - secure: "YgPkRx1jtfVyLQjwLtT9kIfYHBs7b1vJ5EwtOQ53lwifj0aoY/XF+JdfhPDj9ixV9qZiKjtCucTrKeB5baCxeb8wyMJ4R/MQSsR+XKQ4tXIE/d9PB+n+xBRWc3D5KDNSTi+nJNMb15eeK9StEwcAgw7/9YGofBDvNwucnqXmshof3QkPasDF8SscTpZ+X4VHDqJ/UUwH2wSuRgJwHgiPs5aSHwfkqIsdXXzMj6uplc+fvyP1M1Eso6UuuDuNRkFfUKyCIH9ihHxzwZ06l9xDycOMI23I/fGqqNH/cF/ITeWTmSnurOq30hmxD3ltlXdTbbO0kB3M7o+3fLlz9P37eedouhvEVMO7+nVS7HWWt4ie9rNQWyjkPkP/9A0HDxWAp9QAzs7NSwEdXCOofJWgdKc1LLtsVuXMJeWFPQ9a5L/XORKg28gBgoqtYqjRodrk6htjQdZqUsCsHQMw5MnHCgSwYBo/J/IWBuKJ28LSVahPvR5hUc32s1egVrO6IvHnpYjHXufyi0B5o4vXOjUkpi1DjRy2M9PpnzFl5Q+a4BOCeASi5jVjMChbNFZNEZWhoqrvdvZGBxQ5fScDs0LZ4WE+XuN/W8tQ0o0ALTk/c+o9+T6pcq382u9JXWPlR7qqs7LEQZ2IP7v5i3/D1kmQIHTl2L81585XsusCbLkHQUM="
  # Ex. travis encrypt GH_TOKEN=XXX-https://github.com/settings/tokens-XXX --add
  - secure: "MEVbkUE+/UEAiI6BZzAYOY3jH+CwQVjpxNxtZeLLKWbo3WanixRfeICU/OvBWwt6uYo2oMxIZH0guPay4IKgTgQXTuqGl8OQfy7/LF+k2lHdGAzi6eODErtzlVE/8LW9GopVKuKdt2MPFxkZO+ALMwSKwmeJBafRszn2J5QN/EbbclQpLsgxjdg5IUi0faZIV8ncxb1BzZTernivaRKsmDDHeiyP7cRYAUPrGyzGtvCQlKkx0CAA6buwjOzN4hqRNnIJc+892MSXntDQonEwuNysT29Y494gup3YeI7vjHsX0kaS6Is7/pWR/cUFuR47PwDWz96AucUKh8C/9pk1WVqa/cLk/d20SLDibKS8OL4X2ecxoq0BYxGxiZsoQMyn8ELprIo40WoSvwlctsr7mUrhE/V1EUEN1DK15ZK5wM57ZF46M+4dSbsL0X+591MaK8fPWytYLSUKpS05L5woB2OYk7oH5CxFb/FkaTzVKMDR82LabIj4A8T1eS7uZCyYU+dPfQPv31+I0eOhyh5F6l2GgAsDmB96Gfm/cMrb2p66h/yEVdsyVwkinnToRmHHY8BFUuq7tlAe3C/07i9EoMJnvZ/e0rYcYRB076rSHs+B/06+EBxNA43fxpoaW9QVTcOvxAOhbniHyRWAjnC1uOaV5XhwN1alV7V7KOLUDQI="
  # Ex. travis encrypt SONATYPE_USER=your_sonatype_account
  - secure: "j1XtaCBCfg3Bajh+ZcyhXa5nbWGqwaJYtvdTiBetD0yiemOMe1sk9KZj/KP7UVyPQxRwxMhm3AZu08hZrfdsVnzZpsv5/9VYqZJFjrRa74oSZKrVtBP2eK0/gIWUihUwUFxBUXt6oGVSNTD4mOtXKwxmq277fjFIMKFeSTFR4xUPAsOXprYPMLDo8Pt3wgFZR+0RsR2nc/A3KAXjx20UtKPW+vFxsUD5yLhko9winUGVWHPfqYEqQVHerWDB5uTmG8JK/dI1lHkvwb/cEGEcwZuUFSzV5Nkfq6gOhnPM/ex3IXgfdGnh9rnCZJYfyQkOG6+JasDW0sRqFnwE1f0mWpzGPLxnRG+QFS/LxxdSm43OcwEvID8PtyptntPQHZNP/vSePyZIE0UlNOWigNyEG4xWCjyB6u8kFkJfL5QN5+MdudCagBe1cvwMrWF7kovdJjjsjdx53it1NzVK2prk/WnZv+h9Ux6IBBFRj6hEJD5aqZYKhWu04KT51hiSZNxsQRl+LyfQb39Fba+9iALpcCLHEkC5DRBOM2sWy1fva71BRVzAxVeI/5BU4b2xOmigIXb1ybQYofUR6U0aLFrwvafFV5NpzfhvgVPGBJt/jKw0GrVHSmgaz9q61JJjff17aTnEvZRUglM8C3UViQ9ElL2v6yOnPV+WHAjRenHv88c="
  # Ex. travis encrypt SONATYPE_PASSWORD=your_sonatype_password
  - secure: "qxoHS8h7aoY/ycjEFTWrZR19cEcBGl0Rc2kve5P6RbpWJbacqE4YZniipAs1Jq6mNyKrpHwYB7yS+GzW3UT6+WQfmgD6xNhF2FaxYsngZ5O9N66eSxwGba8fLHPlcVvlGd1FVAe+zmudvVQ6XbZFjHBGmRhWxNuGHmUzA5lfMYLyE1EtC5cSRHnkHs1Iaocl5mjrYxLp6x7TPiPEd07MI2PMUXqXTp15R0GHeqaMpYfiBUn9vj4+A09lTGcxtVftyVyH0JruTHzRpAupRmePcvp/vFIfIQYPpbDyCcJ2A2RSPZM1iSnGWC1GcLIrG+ovQzvhjioXjCNOjb9kwYEimaY6zy8qIXwQUjG8ioBl24IqpD48bY3r7gXUH7eIfM411DJBkRY6cwMeW33waomtOkLy5Zwr0sYRBlf4y1oIQVd2EE22fjyuq6tfsucRNGBNX62zBxs9pHeYdpF0mRs8mrbeRD7hNNjmo8z+6Q6NCHNBph5zhxn8Tba85sm9CYXBe0XEb2/tfv6JFqL8xmSaaXbmi6GesQV9kXOWPIb2FaWZNqCHlr1hFE41+rPXjgX9tMt2ec2s7wTvXFzXXVBsp8CehRMp24SjwNCdFQ0Bk6DLpu9mj+VH5y/KbNEW8z0VE7oh9eT9uskFR1Inmfgpzk01oGfMAdWywzmAIGoLAWc="
